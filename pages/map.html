<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>LTileMap</title>
    <script type="text/javascript" src="../lufylegend-1.7.3.min.js"></script>
    <script type="text/javascript" src="../lufylegendrpg-1.0.0.min.js"></script>
    <script>
    init(30,"legend",480,320,main);
    LGlobal.setDebug(true);
    var backLayer,loadingLayer;
    var map;
    var loadData = [
        {name:"map",path:"./map.jpg"}
    ];
    var imglist = [];
    var mapData = [
        [18,18,18,18,18,18,18,18,18,18,18,18,55,55,18],
        [18,18,18,17,17,17,17,17,17,17,17,17,55,55,18],
        [18,18,17,17,17,17,18,18,17,17,17,17,55,55,18],
        [18,17,17,17,18,18,18,18,18,17,17,55,55,17,18],
        [18,17,17,18,22,23,23,23,24,18,17,55,55,17,18],
        [18,17,17,18,25,28,26,79,27,18,55,55,17,17,18],
        [18,17,17,17,17,10,11,12,18,18,55,55,17,17,18],
        [18,18,17,17,10,16,16,16,11,55,55,17,17,17,18],
        [18,18,17,17,77,16,16,16,16,21,21,17,17,17,18],
        [18,18,18,18,18,18,18,18,18,55,55,18,18,18,18]
    ];
    function main(){
        //加入进度条
        loadingLayer = new LoadingSample1();
        addChild(loadingLayer);
        //加载图片并显示进度
        LLoadManage.load(
            loadData,
            function(progress){
                loadingLayer.setProgress(progress);
            },
            gameInit
        );
    }
    function gameInit(result){
        removeChild(loadingLayer);
        imglist = result;
        //初始化层
        backLayer = new LSprite();
        addChild(backLayer);
        //加入地图
        addMap();
    }
    function addMap(){
        map = new LTileMap(mapData,imglist["map"],32,32);
        backLayer.addChild(map);
    }
    </script>
</head>
<body>
<div id="legend"></div>
</body>
</html>
